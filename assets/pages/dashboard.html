<div class="container mt-4">
  <h2 class="mb-4">Machine Dashboard</h2>

  <!-- Graphs -->
  <div class="row mb-4">
    <div class="col-md-6">
      <canvas id="leftMotorChart"></canvas>
    </div>
    <div class="col-md-6">
      <canvas id="rightMotorChart"></canvas>
    </div>
  </div>

  <!-- Status Grid -->
  <div class="row">
    <!-- Repeat for each component -->
    <div class="col-md-4 mb-3" id="tile-0">
      <div class="card text-white bg-danger">
        <div class="card-body d-flex justify-content-between align-items-center">
          <span>Left Motor</span>
          <span class="badge bg-dark">Not Ready</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3" id="tile-1">
      <div class="card text-white bg-danger">
        <div class="card-body d-flex justify-content-between align-items-center">
          <span>Right Motor</span>
          <span class="badge bg-dark">Not Ready</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3" id="tile-2">
      <div class="card text-white bg-danger">
        <div class="card-body d-flex justify-content-between align-items-center">
          <span>Encoder 1</span>
          <span class="badge bg-dark">Not Ready</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3" id="tile-3">
      <div class="card text-white bg-danger">
        <div class="card-body d-flex justify-content-between align-items-center">
          <span>Encoder 2</span>
          <span class="badge bg-dark">Not Ready</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3" id="tile-4">
      <div class="card text-white bg-danger">
        <div class="card-body d-flex justify-content-between align-items-center">
          <span>Animation Ready</span>
          <span class="badge bg-dark">Not Ready</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3" id="tile-5">
      <div class="card text-white bg-danger">
        <div class="card-body d-flex justify-content-between align-items-center">
          <span>Hopper Ready</span>
          <span class="badge bg-dark">Not Ready</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3" id="tile-6">
      <div class="card text-white bg-danger">
        <div class="card-body d-flex justify-content-between align-items-center">
          <span>Stepper 1</span>
          <span class="badge bg-dark">Not Ready</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3" id="tile-7">
      <div class="card text-white bg-danger">
        <div class="card-body d-flex justify-content-between align-items-center">
          <span>Stepper 2</span>
          <span class="badge bg-dark">Not Ready</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3" id="tile-8">
      <div class="card text-white bg-danger">
        <div class="card-body d-flex justify-content-between align-items-center">
          <span>Aux Motor</span>
          <span class="badge bg-dark">Not Ready</span>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  window.renderStatusGrid = function(bitmask = 0) {
    for (let i = 0; i < 9; i++) {
      const card = document.querySelector(`#tile-${i} .card`);
      const badge = document.querySelector(`#tile-${i} .badge`);
      const ready = (bitmask & (1 << i)) !== 0;

      card.classList.toggle('bg-success', ready);
      card.classList.toggle('bg-danger', !ready);
      badge.textContent = ready ? 'Ready' : 'Not Ready';
      badge.classList.toggle('bg-light', ready);
      badge.classList.toggle('text-dark', ready);
      badge.classList.toggle('bg-dark', !ready);
    }
  };

  // Default state
  renderStatusGrid(0);

  // TODO: Hook into /getStatus BLE polling
</script>
